<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			div label {
				margin: 20px 0;
				font-family: "Georgia", serif;
				color: #212121;
			}
		</style>
	</head>
	<body>
		<div id="two"></div>
		<div id="three"></div>
		<div id="categorySearchAttr"></div>
	</body>
	<script src="../js/axios.min.js"></script>
	<script src="../js/jquery-3.5.1.min.js"></script>
	<script>
		//获得平台属性
		function getCategroyAttr(categroyID) {
			axios.get(
					'http://127.0.0.1:8888/productService/pmsAttr/getCategorySearchAttr/' +
					oneDefaultThreeCatrgroy.catId)
				.then(function(response) {
					console.log('解析请求')
					var data = response.data;
					if (data.code == 8888) {
						console.log('请求成功')
						
						console.log(data.data);
						return data.data
					} else {
						alert(data.message)
					}
				})
				.catch(function(error) {
					console.log(error);
				});
		}
	</script>
	
	<script>
		//获取父节点
		var twoCategoryDiv = document.getElementById("two");
		//获取二级标题
		var twoCategoryList = JSON.parse(localStorage.getItem('category'))


		const oneDefaultThreeCatrgroy = (twoCategoryList[0].children)[0];
		console.log("默认三级" + oneDefaultThreeCatrgroy.name)
		
		getCategroyAttr(oneDefaultThreeCatrgroy.catId);





		//遍历二级标题
		twoCategoryList.forEach((category, index) => {
			// Create a new HTML element for each category
			const element = document.createElement("label");


			// Add a click event listener to the element
			element.addEventListener("click", () => {
				// Handle the click event for the element
				var threeCategoryDiv = document.getElementById("three");
				threeCategoryDiv.innerHTML = "";

				const defaultThreeCatrgroy = (category.children)[0];
				console.log("默认三级" + defaultThreeCatrgroy.name)
				getCategroyAttr(defaultThreeCatrgroy.catId);



				var threeCategoryList = category.children

				threeCategoryList.forEach((category, index) => {
					// Create a new HTML element for each category
					const element = document.createElement("label");
					threeCategoryDiv.appendChild(element);
					element.innerText = category.name + '/';
					element.addEventListener("click", () => {
					getCategroyAttr(category.catId);





					});


				});
			});
			twoCategoryDiv.appendChild(element);
			// if(count%3==0)
			// {
			//  var brLa = document.createElement("br");
			//  categoryDiv.appendChild(brLa);
			//  console.log('换行')
			// }
			// else
			// {
			//  category.name+='/'
			// }

			element.innerText = category.name + '|';
			// count++;
			// Append the element to the array
			// elements.push(element);
		});
	</script>

	


</html>
